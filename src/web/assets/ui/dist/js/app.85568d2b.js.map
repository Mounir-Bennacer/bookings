{"version":3,"sources":["webpack:///./src/enums/BookableType.js","webpack:///./src/models/ExRule.js","webpack:///./src/API.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/helpers/uuid.js","webpack:///./src/models/RecursionRule.js","webpack:///external \"Vue\"","webpack:///./src/enums/Frequency.js"],"names":["BookableType","_this","this","Object","keys","map","key","value","ExRule","def","arguments","length","undefined","overwriteId","__WEBPACK_IMPORTED_MODULE_0__Users_tam_Sites_CRAFT_3_PLUGINS_bookings_resources_ui_node_modules_babel_runtime_helpers_classCallCheck___default","__WEBPACK_IMPORTED_MODULE_1__Users_tam_Sites_CRAFT_3_PLUGINS_bookings_resources_ui_node_modules_babel_runtime_helpers_possibleConstructorReturn___default","__proto__","getPrototypeOf","call","defineProperty","__WEBPACK_IMPORTED_MODULE_3__Users_tam_Sites_CRAFT_3_PLUGINS_bookings_resources_ui_node_modules_babel_runtime_helpers_assertThisInitialized___default","configurable","enumerable","writable","hasOwnProperty","indexOf","Date","date","setSeconds","setMilliseconds","__WEBPACK_IMPORTED_MODULE_4__RecursionRule__","API","postActionRequest","_postActionRequest","asyncToGenerator_default","regeneratorRuntime","mark","_callee","action","data","url","opts","response","wrap","_context","prev","next","Craft","actionUrl","method","headers","Headers","Accept","body","JSON","stringify","credentials","fetch","sent","json","abrupt","stop","_x","_x2","apply","refreshCalendar","_callee8","commit","state","res","slots","exceptions","_context8","baseRule","convertToRRuleObject","values","r","formatSlotsForStorage","duration","t0","console","error","reduce","slot","d","day","getDay","hour","getHours","minute","getMinutes","year","getFullYear","month","getMonth","getDate","getTime","all","push","external__Vue__default","a","use","vuex_esm","store_state","enabled","RecursionRule","exceptionsSort","bookableType","FIXED","computedSlots","computedExceptions","slotDuration","getters","getExceptionById","id","actions","setDefaultState","_setDefaultState","_ref","payload","_x3","_x4","updateBookableType","_updateBookableType","_callee2","_ref2","_context2","_x5","_x6","updateRule","_updateRule","_callee3","_ref3","_context3","_x7","_x8","addException","_addException","_callee4","_ref4","_context4","_x9","updateExceptionsSort","_updateExceptionsSort","_callee5","_ref5","_context5","_x10","_x11","duplicateExceptionById","_duplicateExceptionById","_callee6","_ref6","_context6","_x12","_x13","deleteExceptionById","_deleteExceptionById","_callee7","_ref7","_context7","_x14","_x15","mutations","_ref8","_ref8$settings","settings","b","ex","nextRule","constructor","newExRule","nextExceptions","objectSpread_default","nextSort","toConsumableArray_default","splice","refreshComputedSlots","_ref9","store","Store","debug","BookingsUI","section","options","onImport","App","vm","render","h","default","$mount","document","querySelector","appendChild","$el","__webpack_require__","e","then","bind","Error","concat","config","productionTip","portal_vue_default","window","__BookingsUI","uuidv4","replace","c","Math","random","v","toString","RecursionRule_RecursionRule","classCallCheck_default","Frequency","Hourly","_this2","obj","convertToDataObject","repeats","count","until","toISOString","module","exports","Vue"],"mappings":"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","file":"js/app.85568d2b.js","sourcesContent":["export default class BookableType {\n\n\t// Properties\n\t// =========================================================================\n\n\t// Properties: Static\n\t// -------------------------------------------------------------------------\n\n\tstatic FIXED = \"fixed\";\n\tstatic FLEXIBLE = \"flexible\";\n\n\t// Functions\n\t// =========================================================================\n\n\t/**\n\t * @return {{key: string, value: *}[]}\n\t */\n\tstatic asKeyValueArray () {\n\t\treturn Object.keys(this).map(key => ({ key, value: this[key] }));\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/enums/BookableType.js","import RecursionRule from \"./RecursionRule\";\n\nexport default class ExRule extends RecursionRule {\n\n\t// Properties\n\t// =========================================================================\n\n\t// Properties: Instance\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * @type {boolean}\n\t */\n\tbookable = false;\n\n\t// Constructor\n\t// =========================================================================\n\n\tconstructor (def = {}, overwriteId = false) {\n\t\tsuper();\n\n\t\tdef && Object.keys(def).map(key => {\n\t\t\tif (!this.hasOwnProperty(key))\n\t\t\t\treturn;\n\n\t\t\tif (key === \"id\" && overwriteId)\n\t\t\t\treturn;\n\n\t\t\tlet value = def[key];\n\n\t\t\tif (~[\"start\", \"until\"].indexOf(key)) {\n\t\t\t\tif (!(value instanceof Date))\n\t\t\t\t\tvalue = new Date(typeof value === \"string\" ? value : value.date + \"Z\");\n\t\t\t\tvalue.setSeconds(0);\n\t\t\t\tvalue.setMilliseconds(0);\n\t\t\t}\n\n\t\t\tthis[key] = value;\n\t\t});\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/ExRule.js","/* global Craft */\n\nexport default {\n\tasync postActionRequest (action, data) {\n\t\tconst url = typeof Craft !== \"undefined\"\n\t\t\t? Craft.actionUrl + \"/\"\n\t\t\t: \"https://dev.craft3/index.php?p=actions/\";\n\n\t\tconst opts = {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: new Headers({\n\t\t\t\t\"Accept\": \"application/json\",\n\t\t\t}),\n\t\t\tbody: JSON.stringify(data),\n\t\t};\n\n\t\tif (typeof Craft !== \"undefined\")\n\t\t\topts.credentials = \"include\";\n\n\t\tconst response = await fetch(url + action, opts);\n\n\t\treturn await response.json();\n\t}\n};\n\n\n// WEBPACK FOOTER //\n// ./src/API.js","import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport API from \"../API\";\nimport RecursionRule from \"../models/RecursionRule\";\nimport ExRule from \"../models/ExRule\";\nimport BookableType from \"../enums/BookableType\";\n\nVue.use(Vuex);\n\n// API\n// =========================================================================\n\n/**\n * Refreshes the calendar data from the API\n *\n * @param commit\n * @param state\n * @return {Promise<void>}\n */\nasync function refreshCalendar (commit, state) {\n\t// TODO: Add validation to RRules when converting\n\t// (don't refresh if any rule is invalid)\n\n\tconst body = {\n\t\tbaseRule: state.baseRule.convertToRRuleObject(),\n\t\texceptions: Object.values(state.exceptions).map(r => r.convertToRRuleObject()),\n\t};\n\n\ttry {\n\t\tconst res = await API.postActionRequest(\"bookings/api/get-calendar\", body);\n\n\t\tconst slots = formatSlotsForStorage(res.slots);\n\t\tconst exceptions = formatSlotsForStorage(res.exceptions);\n\n\t\tcommit(\"refreshComputedSlots\", { slots, exceptions, duration: res.duration });\n\t} catch (err) {\n\t\tconsole.error(err);\n\t}\n}\n\n// Helpers\n// =========================================================================\n\n/**\n * Parses the returned slots and formats them for storage & later use\n *\n * @param slots\n * @return {*}\n */\nfunction formatSlotsForStorage (slots) {\n\treturn slots.reduce((slots, slot) => {\n\t\tconst d = new Date(slot.date + \"Z\");\n\t\td.setSeconds(0);\n\t\td.setMilliseconds(0);\n\n\t\tslot.date = d;\n\t\tslot.day = slot.date.getDay();\n\t\tslot.hour = slot.date.getHours();\n\t\tslot.minute = slot.date.getMinutes();\n\n\t\tconst year = slot.date.getFullYear()\n\t\t\t, month = slot.date.getMonth() + 1\n\t\t\t, date = slot.date.getDate()\n\t\t\t, key = slot.date.getTime();\n\n\t\tif (!slots.hasOwnProperty(year))\n\t\t\tslots[year] = {};\n\n\t\tif (!slots[year].hasOwnProperty(month))\n\t\t\tslots[year][month] = { all: {} };\n\n\t\tif (!slots[year][month].hasOwnProperty(date))\n\t\t\tslots[year][month][date] = [];\n\n\t\tslots[year][month].all[key] = slot;\n\t\tslots[year][month][date].push(key);\n\n\t\treturn slots;\n\t}, {});\n}\n\n// State\n// =========================================================================\n\nconst state = {\n\tenabled: false,\n\n\tbaseRule: new RecursionRule(),\n\texceptions: {},\n\texceptionsSort: [],\n\tbookableType: BookableType.FIXED,\n\n\tcomputedSlots: {},\n\tcomputedExceptions: {},\n\tslotDuration: 1,\n};\n\nconst getters = {\n\tgetExceptionById: (state) => (id) => {\n\t\treturn state.exceptions[id];\n\t},\n};\n\nconst actions = {\n\n\tasync setDefaultState ({ commit, state }, payload) {\n\t\tpayload && commit(\"setDefaultState\", payload);\n\t\tawait refreshCalendar(commit, state);\n\t},\n\n\tasync updateBookableType ({ commit }, payload) {\n\t\tcommit(\"updateBookableType\", payload);\n\t},\n\n\tasync updateRule ({ commit, state }, payload) {\n\t\tcommit(\"updateRule\", payload);\n\t\tawait refreshCalendar(commit, state);\n\t},\n\n\tasync addException ({ commit, state }) {\n\t\tcommit(\"addException\");\n\t\tawait refreshCalendar(commit, state);\n\t},\n\n\tasync updateExceptionsSort ({ commit, state }, payload) {\n\t\tcommit(\"updateExceptionsSort\",  payload);\n\t\tawait refreshCalendar(commit, state);\n\t},\n\n\tasync duplicateExceptionById ({ commit, state }, payload) {\n\t\tcommit(\"duplicateExceptionById\", payload);\n\t\tawait refreshCalendar(commit, state);\n\t},\n\n\tasync deleteExceptionById ({ commit, state }, payload) {\n\t\tcommit(\"deleteExceptionById\", payload);\n\t\tawait refreshCalendar(commit, state);\n\t}\n\n};\n\nconst mutations = {\n\n\t/**\n\t * Sets the default state of the store\n\t *\n\t * @param state\n\t * @param enabled\n\t * @param baseRule\n\t * @param exceptions\n\t * @param bookableType\n\t */\n\tsetDefaultState (state, { enabled, settings: { baseRule, exceptions, bookableType } }) {\n\t\tconst exceptionsSort = [];\n\n\t\tstate.enabled = enabled;\n\t\tstate.baseRule = new RecursionRule(baseRule);\n\t\tstate.exceptions = exceptions.reduce((a, b) => {\n\t\t\tconst ex = new ExRule(b);\n\t\t\ta[ex.id] = ex;\n\t\t\texceptionsSort.push(ex.id);\n\t\t\treturn a;\n\t\t}, {});\n\t\tstate.exceptionsSort = exceptionsSort;\n\t\tstate.bookableType = bookableType || BookableType.FIXED;\n\t},\n\n\t/**\n\t * Updates the bookable type\n\t *\n\t * @param state\n\t * @param bookableType\n\t */\n\tupdateBookableType (state, bookableType) {\n\t\tstate.bookableType = bookableType;\n\t},\n\n\t/**\n\t * Updates the given rule\n\t *\n\t * @param state\n\t * @param {RecursionRule|ExRule} nextRule\n\t */\n\tupdateRule (state, nextRule) {\n\t\tif (nextRule.constructor === RecursionRule) {\n\t\t\tstate.baseRule = nextRule;\n\t\t\treturn;\n\t\t}\n\n\t\tstate.exceptions[nextRule.id] = nextRule;\n\t},\n\n\t/**\n\t * Creates a new exception and adds it to the bottom of the list\n\t *\n\t * @param state\n\t */\n\taddException (state) {\n\t\tconst newExRule = new ExRule();\n\t\tstate.exceptions[newExRule.id] = newExRule;\n\t\tstate.exceptionsSort.push(newExRule.id);\n\t},\n\n\t/**\n\t * Updates the order of the exceptions\n\t *\n\t * @param state\n\t * @param exceptionsSort\n\t */\n\tupdateExceptionsSort (state, exceptionsSort) {\n\t\tstate.exceptionsSort = exceptionsSort;\n\t},\n\n\t/**\n\t * Duplicates the exception (by the given ID) appends it to the list\n\t *\n\t * @param state\n\t * @param id\n\t */\n\tduplicateExceptionById (state, id) {\n\t\tconst ex = state.exceptions[id];\n\t\tconst next = new ExRule(ex, true);\n\n\t\tstate.exceptions[next.id] = next;\n\t\tstate.exceptionsSort.push(next.id);\n\t},\n\n\t/**\n\t * Deletes the exception for the given ID\n\t *\n\t * @param state\n\t * @param id\n\t */\n\tdeleteExceptionById (state, id) {\n\t\tconst nextExceptions = { ...state.exceptions }\n\t\t\t, nextSort = [ ...state.exceptionsSort ];\n\n\t\tdelete nextExceptions[id];\n\t\tnextSort.splice(nextSort.indexOf(id), 1);\n\n\t\tstate.exceptions = nextExceptions;\n\t\tstate.exceptionsSort = nextSort;\n\t},\n\n\t/**\n\t * Sets the computed slots\n\t */\n\trefreshComputedSlots (state, { slots, exceptions, duration }) {\n\t\tstate.computedSlots = slots;\n\t\tstate.computedExceptions = exceptions;\n\t\tstate.slotDuration = duration;\n\t},\n\n};\n\nexport default new Vuex.Store({\n\tstate,\n\tgetters,\n\tactions,\n\tmutations,\n\tdebug: process.env.NODE_ENV !== \"production\",\n});\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import \"whatwg-fetch\";\nimport Vue from \"vue\";\nimport PortalVue from \"portal-vue\";\nimport store from \"./store\";\n\nVue.config.productionTip = false;\nVue.use(PortalVue);\n\n/**\n * ```js\n * new window.__BookingsUI(\"field\", \"#namespacedId\", {});\n * ```\n *\n * @param {string} section\n * @param {string=} id\n * @param {Object=} options\n * @constructor\n */\nfunction BookingsUI (section, id = \"#app\", options = null) {\n\n\tconst onImport = App => {\n\t\tconst vm = new Vue({\n\t\t\trender: h => h(App.default),\n\t\t\tdata: { options },\n\t\t\tstore,\n\t\t}).$mount();\n\n\t\t// Mount as a child of the parent (not replacing it)\n\t\tdocument.querySelector(id).appendChild(vm.$el);\n\t};\n\n\tswitch (section) {\n\t\tcase \"dev\":\n\t\tcase \"field\":\n\t\t\timport(\"./Field/index.vue\").then(onImport);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown Bookings UI section: ${section}`);\n\t}\n\n}\n\nif (process.env.NODE_ENV === \"development\") {\n\tnew BookingsUI(\n\t\t\"dev\",\n\t\t\"#app\",\n\t\t{\n\t\t\thandle: \"fieldHandle\",\n\t\t\tvalue: {\n\t\t\t\t\"enabled\": true,\n\t\t\t\t\"settings\":{\n\t\t\t\t\t\"baseRule\":{\n\t\t\t\t\t\t\"frequency\":\"HOURLY\",\n\t\t\t\t\t\t\"start\":{\"date\":\"2018-07-12 01:00:00.000000\",\"timezone_type\":3,\"timezone\":\"UTC\"},\n\t\t\t\t\t\t\"duration\":1,\n\t\t\t\t\t\t\"interval\":0,\n\t\t\t\t\t\t\"repeats\":\"count\",\n\t\t\t\t\t\t\"count\":20,\n\t\t\t\t\t\t\"until\":{\"date\":\"2018-07-12 01:00:00.000000\",\"timezone_type\":3,\"timezone\":\"UTC\"},\n\t\t\t\t\t\t\"byMonth\":[],\n\t\t\t\t\t\t\"byWeekNumber\":[],\n\t\t\t\t\t\t\"byYearDay\":[],\n\t\t\t\t\t\t\"byMonthDay\":[],\n\t\t\t\t\t\t\"byDay\":[],\n\t\t\t\t\t\t\"byHour\":[],\n\t\t\t\t\t\t\"byMinute\":[],\n\t\t\t\t\t\t\"bySetPosition\":[]\n\t\t\t\t\t},\n\t\t\t\t\t\"exceptions\":[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"bookable\":false,\n\t\t\t\t\t\t\t\"repeats\":\"count\",\n\t\t\t\t\t\t\t\"frequency\":\"HOURLY\",\n\t\t\t\t\t\t\t\"start\":{\"date\":\"2018-07-12 13:00:00.000000\",\"timezone_type\":3,\"timezone\":\"UTC\"},\n\t\t\t\t\t\t\t\"duration\":1,\n\t\t\t\t\t\t\t\"interval\":1,\n\t\t\t\t\t\t\t\"count\":2,\n\t\t\t\t\t\t\t\"until\":{\"date\":\"2018-07-12 16:00:00.000000\",\"timezone_type\":3,\"timezone\":\"UTC\"},\n\t\t\t\t\t\t\t\"byMonth\":[],\n\t\t\t\t\t\t\t\"byWeekNumber\":[],\n\t\t\t\t\t\t\t\"byYearDay\":[],\n\t\t\t\t\t\t\t\"byMonthDay\":[],\n\t\t\t\t\t\t\t\"byDay\":[],\n\t\t\t\t\t\t\t\"byHour\":[],\n\t\t\t\t\t\t\t\"byMinute\":[],\n\t\t\t\t\t\t\t\"bySetPosition\":[]\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"bookableType\":\"fixed\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t);\n}\n\n\nwindow.__BookingsUI = BookingsUI;\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","export default function uuidv4() {\n\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n\t\tconst r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n\t\treturn v.toString(16);\n\t});\n}\n\n\n// WEBPACK FOOTER //\n// ./src/helpers/uuid.js","import Frequency from \"../enums/Frequency\";\nimport uuid from \"../helpers/uuid\";\n\nexport default class RecursionRule {\n\n\t// Properties\n\t// =========================================================================\n\n\t// Properties: Instance\n\t// -------------------------------------------------------------------------\n\n\t/**\n\t * @type {String|null}\n\t */\n\tid = null;\n\n\t/**\n\t * @type {String}\n\t */\n\tfrequency = Frequency.Hourly;\n\n\t/**\n\t * @type {Date}\n\t */\n\tstart = new Date();\n\n\t/**\n\t * @type {number}\n\t */\n\tduration = 1;\n\n\t/**\n\t * @type {Number}\n\t */\n\tinterval = 0;\n\n\t/**\n\t * @type {String}\n\t */\n\trepeats = \"count\";\n\n\t/**\n\t * @type {Number|null}\n\t */\n\tcount = 1;\n\n\t/**\n\t * @type {Date|null}\n\t */\n\tuntil = new Date();\n\n\t/**\n\t * @type {Number[]|null}\n\t */\n\tbyMonth = [];\n\n\t/**\n\t * @type {Number[]|null}\n\t */\n\tbyWeekNumber = [];\n\n\t/**\n\t * @type {Number[]|null}\n\t */\n\tbyYearDay = [];\n\n\t/**\n\t * @type {Number[]|null}\n\t */\n\tbyMonthDay = [];\n\n\t/**\n\t * @type {String[]|null}\n\t */\n\tbyDay = [];\n\n\t/**\n\t * @type {Number[]|null}\n\t */\n\tbyHour = [];\n\n\t/**\n\t * @type {Number[]|null}\n\t */\n\tbyMinute = [];\n\n\t/**\n\t * @type {Number[]|null}\n\t */\n\tbySetPosition = [];\n\n\t// Constructor\n\t// =========================================================================\n\n\tconstructor (def = {}, overwriteId = false) {\n\t\tthis.id = uuid();\n\n\t\tdef && Object.keys(def).map(key => {\n\t\t\tif (!this.hasOwnProperty(key))\n\t\t\t\treturn;\n\n\t\t\tif (key === \"id\" && overwriteId)\n\t\t\t\treturn;\n\n\t\t\tlet value = def[key];\n\n\t\t\tif (~[\"start\", \"until\"].indexOf(key)) {\n\t\t\t\tif (!(value instanceof Date))\n\t\t\t\t\tvalue = new Date(typeof value === \"string\" ? value : value.date + \"Z\");\n\t\t\t\tvalue.setSeconds(0);\n\t\t\t\tvalue.setMilliseconds(0);\n\t\t\t}\n\n\t\t\tthis[key] = value;\n\t\t});\n\t}\n\n\t// Helpers\n\t// =========================================================================\n\n\t/**\n\t * Returns the class as a plain JS object ready of Vue's data()\n\t *\n\t * @return {{}}\n\t */\n\tconvertToDataObject () {\n\t\treturn Object.keys(this).reduce((obj, key) => {\n\t\t\tif (key !== \"id\")\n\t\t\t\tobj[key] = this[key];\n\n\t\t\tif (obj[key] instanceof Date) {\n\t\t\t\tobj[key].setSeconds(0);\n\t\t\t\tobj[key].setMilliseconds(0);\n\t\t\t}\n\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n\n\t/**\n\t * Converts the class to a plain JS object ready for sending to the server\n\t *\n\t * @return {{}}\n\t */\n\tconvertToRRuleObject () {\n\t\tconst data = this.convertToDataObject();\n\n\t\tswitch (data.repeats) {\n\t\t\tcase \"until\":\n\t\t\t\tdelete data.count;\n\t\t\t\tbreak;\n\t\t\tcase \"count\":\n\t\t\t\tdelete data.until;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tdelete data.count;\n\t\t\t\tdelete data.until;\n\t\t}\n\n\t\t// Ensure dates are UTC strings\n\t\tfor (let key in data) {\n\t\t\tconst value = data[key];\n\n\t\t\tif (!(value instanceof Date))\n\t\t\t\tcontinue;\n\n\t\t\tdata[key] = value.toISOString();\n\t\t}\n\n\t\treturn data;\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/RecursionRule.js","module.exports = Vue;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Vue\"\n// module id = lRwf\n// module chunks = 1","export default class Frequency {\n\n\t// Properties\n\t// =========================================================================\n\n\t// Properties: Static\n\t// -------------------------------------------------------------------------\n\n\tstatic Yearly = \"YEARLY\";\n\tstatic Monthly = \"MONTHLY\";\n\tstatic Weekly = \"WEEKLY\";\n\tstatic Daily = \"DAILY\";\n\tstatic Hourly = \"HOURLY\";\n\tstatic Minutely = \"MINUTELY\";\n\n\t// Functions\n\t// =========================================================================\n\n\t/**\n\t * @return {{key: string, value: *}[]}\n\t */\n\tstatic asKeyValueArray () {\n\t\treturn Object.keys(this).map(key => ({ key, value: this[key] }));\n\t}\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/enums/Frequency.js"],"sourceRoot":""}